# Design

The software is implemented following a client/server design. You can think of it as a typical
HTTP server/client and requests/response model, except that the communication protocol isn't HTTP.

The server part olds the "business" logic of the application, it is responsible for managing
the local database and keep it in sync as much as possible with the jira server in a background
thread. It is also responsible for listening to incoming requests and answer them.

The client part is the UI and is to be stateless.
The communication between the server and the client is made through the standard input and output.

This design makes it trivial to completely separate the UI code to the logic code, such that the
UI can be implemented in any suitable programing language or framework, independently of what is
used to implement the server code.

## Communication protocol between client and server

The communication protocol is as follow:
1. A client issue a request by writing a specific message into the server stdin
2. A client waits on the server's stdout to read a reply

It is to be noted that a server can return more than one reply to a single request. This is
for example the case when the server immediately returns local data, only to realise those were
out of data and new data is available.

In order for the client to know which reply corresponds to which request, the client adds a
unique token to each request. When replying, the server also writes that token along all replies
generated by that request.
It is to be noted that the server is not responsible to ensure a token isn't reused. It is the
responsibility of the client to ensure never to use the same token twice.

